# Variables globales
@host = http://localhost:8080/service-catalog
@keycloak_host = https://e73d150e7cc3.ngrok-free.app
@user = proveedor-prueba@example.com
@pass = 123
@client_id = gateway-client

### 1. Obtener token de Keycloak
# @name login
POST {{keycloak_host}}/realms/marketplace-realm/protocol/openid-connect/token
Content-Type: application/x-www-form-urlencoded

grant_type=password&client_id={{client_id}}&username={{user}}&password={{pass}}

### Asignar variable auth_token autom치ticamente
@auth_token = {{login.response.body.$.access_token}}


# ============================================================
# 2. CREAR CATEGOR칈AS PARA PRUEBAS
# ============================================================

### Alojamiento
POST {{host}}/categories
Authorization: Bearer {{auth_token}}
Content-Type: application/json

{
  "name": "Alojamiento"
}

### Transporte
POST {{host}}/categories
Authorization: Bearer {{auth_token}}
Content-Type: application/json

{
  "name": "Transporte"
}

### Servicio General
POST {{host}}/categories
Authorization: Bearer {{auth_token}}
Content-Type: application/json

{
  "name": "Servicios Generales"
}

###############################################
### 5. CREAR SERVICIO ALOJAMIENTO (Cat 1)
### 游댠 Prueba: Google Geocoding + Weather + RestCountries
###############################################
POST {{host}}/services
Authorization: Bearer {{auth_token}}
Content-Type: application/json

{
  "providerId": 29,
  "categoryId": 41,
  "title": "Hotel Casa Bonita",
  "description": "Habitaci칩n confortable",
  "price": 120.0,
  "currency": "USD",
  "active": true,
  "countryCode": "COL",
  "cityCode": "BOG",

  "startDate": "2025-01-20T00:00:00",
  "endDate": "2025-01-25T00:00:00",

  "transportType": null,
  "routeOrigin": null,
  "routeDestination": null,

  "address": "Cra 7 # 32-16 Bogot치",
  "latitude": null,
  "longitude": null,

  "images": [
    { "url": "http://example.com/hotel1.jpg", "position": 1 }
  ]
}



###############################################
### 6. OBTENER SERVICIO ALOJAMIENTO (ID 1)
### 游댠 Validar conexi칩n a Google Maps + Weather + Pa칤s
###############################################
GET {{host}}/services/1
Authorization: Bearer {{auth_token}}
Content-Type: application/json



###############################################
### 7. CREAR SERVICIO TRANSPORTE (Cat 2)
### 游댠 Prueba: Google Directions + Weather + RestCountries
###############################################
POST {{host}}/services
Authorization: Bearer {{auth_token}}
Content-Type: application/json

{
  "providerId": 29,
  "categoryId": 2,
  "title": "Transporte Aeropuerto",
  "description": "Ruta aeropuerto -> hotel",
  "price": 40.0,
  "currency": "USD",
  "active": true,
  "countryCode": "COL",
  "cityCode": "BOG",

  "startDate": null,
  "endDate": null,

  "transportType": "terrestre",
  "routeOrigin": "Aeropuerto El Dorado Bogot치",
  "routeDestination": "Hotel Tequendama Bogot치",

  "address": null,
  "latitude": null,
  "longitude": null,

  "images": [
    { "url": "http://example.com/car1.jpg", "position": 1 }
  ]
}



###############################################
### 8. OBTENER SERVICIO TRANSPORTE (ID 2)
### 游댠 Valida Google Directions + Weather
###############################################
GET {{host}}/services/2
Authorization: Bearer {{auth_token}}
Content-Type: application/json



###############################################
### 9. CREAR SERVICIO GENERAL (Cat 3)
### 游댠 Prueba: SOLO RestCountries
###############################################
POST {{host}}/services
Authorization: Bearer {{auth_token}}
Content-Type: application/json

{
  "providerId": 22,
  "categoryId": 3,
  "title": "Servicio General",
  "description": "Servicio manual simple",
  "price": 20.0,
  "currency": "USD",
  "active": true,
  "countryCode": "COL",
  "cityCode": "BOG",

  "startDate": null,
  "endDate": null,

  "transportType": null,
  "routeOrigin": null,
  "routeDestination": null,

  "address": "Calle 26 #45-02",
  "latitude": null,
  "longitude": null,

  "images": []
}



###############################################
### 10. OBTENER SERVICIO GENERAL (ID 3)
### 游댠 Valida solo RestCountries
###############################################
GET {{host}}/services/3
Authorization: Bearer {{auth_token}}
Content-Type: application/json
